# **統合開発ガイドライン (要約版)**

このドキュメントは、我々のプロジェクトにおける開発の最重要原則をまとめたものです。各項目の背景や具体的なコード例については、詳細版のガイドラインを参照してください。

## **1. 設計の核となる3原則**
すべての設計と実装は、以下の3つの原則に基づきます。
* **YAGNI (You Aren't Gonna Need It)**: 「今、必要ない機能は作らない」という原則です。将来の予測に基づく過剰な実装はせず、常にコードをシンプルに保ちます。
* **単一責務の原則**: 1つのクラスが持つ責務（役割）は1つだけに限定します。ファイル解析、データ整形、保存など、責務が異なる場合は必ずクラスを分割してください。
* **コードの簡潔さ**: 冗長な命名や不要なコメントを避け、意図が明確に伝わる最小限のコードで表現します。

詳細は .kiro/guides/design_principles.md を参照してください

## **2. 実装とアーキテクチャ規約**
プロジェクトの一貫性を保つため、以下の規約を遵守します。
* **ディレクトリ名は具体的に**: `services`や`utils`といった曖昧な名前は禁止です。`parsers`や`validators`のように、責務が明確にわかるディレクトリ名を使用してください。
* **依存関係の解決**: `require_relative`は使用せず、Railsのオートロード機能に完全に任せます。
* **コメントは「なぜ」を記述**: コードの動作をそのまま説明するだけの「翻訳コメント」は禁止です。コメントには、その実装が必要となった**背景や意図（Why）**のみを記述してください。

詳細は .kiro/guides/practical_guideline.md を参照してください

## **3. RBS運用ガイド (最重要ルール)**
RBSは単なる型定義ではなく、プロジェクトの**「信頼できる設計書」**です。以下のルールは絶対です。
* **型定義から読む**: コードを理解する際は、必ず対応するRBSファイルから読み始め、メソッドのインターフェース（引数と返り値の型）を最初に把握してください。
* **実装とRBSを常に同期**: 実装を変更した場合、**必ずその場でRBSも更新**してください。実装と設計書の乖離はプロジェクトの信頼性を著しく損ないます。
* **`untyped`の原則禁止**: `ActiveRecord`の動的メソッドなど、型定義が極めて困難な場合を除き、`untyped`の使用は認められません。常に具体的な型を定義するよう努めてください。

詳細は .kiro/guides/rbs.md を参照してください

## **4. テストガイドライン (最重要ルール)**
品質はテストによって保証されます。以下の原則は、我々のテスト文化の根幹をなします。
* **テストファースト開発**: 機能実装の前に、必ずその振る舞いを定義するテストコードを記述します。これにより、設計が洗練され、バグを早期に発見できます。
* **モックの原則禁止**: テストの信頼性を最大限に高めるため、モックやスタブの使用は原則として禁止します。**本物のオブジェクト同士を連携**させて、システムの実際の振る舞いを検証してください。
* **明確なテスト記述**: テスト名は「～の場合、～が正しく処理されること」のように、意図が明確に伝わる日本語で記述します。テストコードの構造は、必ず「準備(Arrange)・実行(Act)・検証(Assert)」の3段階で構成してください。

詳細は .kiro/guides/test.md を参照してください